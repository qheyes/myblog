(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22eda948"],{"0c16":function(t,e,n){"use strict";var r=n("5ee4"),i=n.n(r);i.a},"11e9":function(t,e,n){var r=n("52a7"),i=n("4630"),a=n("6821"),s=n("6a99"),c=n("69a8"),o=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=a(t),e=s(e,!0),o)try{return u(t,e)}catch(n){}if(c(t,e))return i(!r.f.call(t,e),t[e])}},"36bd":function(t,e,n){"use strict";var r=n("4bf8"),i=n("77f1"),a=n("9def");t.exports=function(t){var e=r(this),n=a(e.length),s=arguments.length,c=i(s>1?arguments[1]:void 0,n),o=s>2?arguments[2]:void 0,u=void 0===o?n:i(o,n);while(u>c)e[c++]=t;return e}},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"456d":function(t,e,n){var r=n("4bf8"),i=n("0d58");n("5eda")("keys",(function(){return function(t){return i(r(t))}}))},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"530d":function(t,e,n){},"5eda":function(t,e,n){var r=n("5ca1"),i=n("8378"),a=n("79e5");t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*a((function(){n(1)})),"Object",s)}},"5ee4":function(t,e,n){},"6c7b":function(t,e,n){var r=n("5ca1");r(r.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},"7b91":function(t,e,n){"use strict";var r=n("cd5b"),i=n.n(r);i.a},8338:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home d-flex jc-between"},[n("div",{staticClass:"left-box"},[n("Banner"),n("Card",{attrs:{icon:"tubiao103",title:"最新文章",items:t.news},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item;return[n("ItemCard",{attrs:{item:e}})]}}])}),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":8,total:t.count},on:{"current-change":t.handleCurrent}})],1),n("div",{staticClass:"right-box"},[n("Card",{attrs:{icon:"weibiaoti9",title:"公告",items:t.notice},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item;return[n("div",{staticClass:"notice d-flex jc-between border-top",attrs:{item:r}},[n("span",[t._v(t._s(r.title))]),n("span",[t._v(t._s(r.time))])])]}}])}),n("Card",{attrs:{icon:"hot",title:"热门文章",items:t.hots},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item,r=t.index;return[n("Hots",{attrs:{item:e,index:r}})]}}])}),n("Card",{attrs:{icon:"liuyan",title:"最新留言",items:t.chat},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item;return[n("div",{staticClass:"chat border-top"},[n("div",{staticClass:"d-flex jc-between"},[r.user&&r.user.username?n("span",{staticClass:"username text-primary"},[t._v(t._s(r.user.username))]):t._e(),n("span",{staticClass:"text-grey"},[t._v(t._s(t._f("date")(r.updatedAt)))])]),n("p",{staticClass:"chat-txt text-ellipsis text-grey"},[t._v(t._s(r.body))])])]}}])})],1)])},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("96cf"),n("3b8d")),s=n("bd86"),c=(n("6c7b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner"},[n("el-carousel",{attrs:{interval:4e3,type:"card",height:"200px"}},t._l(t.banners,(function(e,r){return n("el-carousel-item",{key:r},[n("div",{staticClass:"pic"},[n("el-image",{attrs:{src:e.bannerimg,width:"100%",height:"100%"}},[n("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[t._v("\n            加载中"),n("span",{staticClass:"dot"},[t._v("...")])])])],1)])})),1)],1)}),o=[],u={name:"Banner",data:function(){return{banners:[]}},methods:{fetchBanner:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("banners/list");case 2:e=t.sent,this.banners=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.fetchBanner()}},l=u,f=(n("7b91"),n("2877")),p=Object(f["a"])(l,c,o,!1,null,"2f54b3c4",null),d=p.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hot-item border-top",on:{click:function(e){return t.updateClick(t.item._id,t.item.clicks)}}},[n("span",{staticClass:"num",class:[{red:0===t.index},{yellow:1===t.index},{green:2===t.index}],domProps:{textContent:t._s(t.index+1)}}),n("p",{staticClass:"title text-ellipsis"},[t._v(t._s(t.item.title))]),n("div",{staticClass:"clicks text-primary"},[n("span",{domProps:{textContent:t._s(t.item.clicks)}}),n("i",{staticClass:"iconfont icon-guanzhu"})])])},m=[],v={name:"Hots",props:["item","index"],data:function(){return{}},methods:{updateClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n,r++,t.next=4,this.$http.put("/articles/".concat(e),{clicks:r});case 4:t.sent,this.$router.push("/article/".concat(e));case 6:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}},b=v,g=(n("0c16"),Object(f["a"])(b,h,m,!1,null,"5e2e2655",null)),w=g.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-item border-top"},[n("div",{staticClass:"d-flex"},[n("div",{staticClass:"img-box"},[n("img",{staticClass:"img-cover",attrs:{src:t.item.icon}})]),n("div",{staticClass:"content d-flex flex-column jc-between flex-1"},[n("p",{staticClass:"tit text-grey"},[t._v(t._s(t.item.title))]),n("div",{staticClass:"types d-flex"},t._l(t.item.categories,(function(e,r){return n("div",{key:r,staticClass:"type d-flex ai-center pr-3"},[n("i",{staticClass:"iconfont icon-biaoqian"}),n("span",{staticClass:"pl-1 text-grey-1"},[t._v(t._s(e.name))])])})),0),n("div",{staticClass:"text-bt d-flex jc-between"},[n("ul",{staticClass:"info d-flex"},[n("li",[n("i",{staticClass:"iconfont icon-zuozhe"}),t.item.author&&t.item.author.username?n("span",[t._v("\n              "+t._s(t.item.author.username)+"\n            ")]):t._e()]),n("li",[n("i",{staticClass:"iconfont icon-guanzhu"}),n("span",[t._v(t._s(t.item.clicks))])]),n("li",[n("i",{staticClass:"iconfont icon-piaoliusanicon-shijian"}),n("span",[t._v(t._s(t._f("date")(t.item.updatedAt)))])])]),n("div",{staticClass:"btn",on:{click:t.updateClick}},[t._v("点击阅读")])])])])])},C=[],y={name:"ArticleCard",props:["item"],data:function(){return{model:{}}},methods:{updateClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.item.clicks,e++,t.next=4,this.$http.put("/articles/".concat(this.item._id),{clicks:e});case 4:t.sent,this.$router.push({name:"article",params:{id:this.item._id}});case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},_=y,O=(n("b133"),Object(f["a"])(_,x,C,!1,null,"64422fae",null)),j=O.exports,k=n("2f62");function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(n,!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $={name:"Home",components:{Banner:d,Hots:w,ItemCard:j},data:function(){return{page:0,count:0,news:[],notice:new Array(5).fill(1).map((function(t){return{title:"6月2日全服不停机更新公告",time:"6-10"}})),hots:[],chat:[]}},methods:R({},Object(k["c"])("userInfo",["init"]),{isInit:function(){var t=this.Cookies.get("token"),e=this.Cookies.get("userID");t&&e||this.init()},fetchNews:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.page,t.next=3,this.$http.get("articles/news?page="+e);case 3:n=t.sent,this.news=n.data.news,this.count=n.data.count;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCurrent:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e-1,t.next=3,this.$http.get("articles/news?page="+n);case 3:r=t.sent,this.news=r.data.news;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),fetchHots:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/articles/hots");case 2:e=t.sent,this.hots=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fetchChat:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/comments/list");case 2:e=t.sent,n=[],e.data.forEach((function(t,e){e<6&&n.push({body:t.body,createdAt:t.createdAt,user:t.user})})),this.chat=n;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}),activated:function(){var t=this.$loading;this.isInit(),this.fetchNews(),this.fetchHots(),this.fetchChat(),t.close()}},S=$,A=(n("89e8"),Object(f["a"])(S,r,i,!1,null,"3caabbf0",null));e["default"]=A.exports},"85f2":function(t,e,n){t.exports=n("454f")},"89e8":function(t,e,n){"use strict";var r=n("530d"),i=n.n(r);i.a},"8e6e":function(t,e,n){var r=n("5ca1"),i=n("990b"),a=n("6821"),s=n("11e9"),c=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),o=s.f,u=i(r),l={},f=0;while(u.length>f)n=o(r,e=u[f++]),void 0!==n&&c(l,e,n);return l}})},9093:function(t,e,n){var r=n("ce10"),i=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},"990b":function(t,e,n){var r=n("9093"),i=n("2621"),a=n("cb7c"),s=n("7726").Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},b133:function(t,e,n){"use strict";var r=n("d7d0"),i=n.n(r);i.a},bd86:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("85f2"),i=n.n(r);function a(t,e,n){return e in t?i()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},cd5b:function(t,e,n){},d7d0:function(t,e,n){},f1ae:function(t,e,n){"use strict";var r=n("86cc"),i=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}}}]);
//# sourceMappingURL=chunk-22eda948.9305977a.js.map