(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c5d9e2f"],{"11e9":function(t,e,s){var r=s("52a7"),n=s("4630"),i=s("6821"),a=s("6a99"),c=s("69a8"),o=s("c69a"),u=Object.getOwnPropertyDescriptor;e.f=s("9e1e")?u:function(t,e){if(t=i(t),e=a(e,!0),o)try{return u(t,e)}catch(s){}if(c(t,e))return n(!r.f.call(t,e),t[e])}},"3b0f":function(t,e,s){},"454f":function(t,e,s){s("46a7");var r=s("584a").Object;t.exports=function(t,e,s){return r.defineProperty(t,e,s)}},"456d":function(t,e,s){var r=s("4bf8"),n=s("0d58");s("5eda")("keys",(function(){return function(t){return n(r(t))}}))},"45f4":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat"},[s("Bread",{attrs:{title:"留言板"}}),s("div",{staticClass:"body"},[s("div",{staticClass:"ipt-box d-flex ai-center"},[s("div",{staticClass:"pic"},[t.isShow?t._e():s("el-avatar",{attrs:{icon:"el-icon-user-solid",size:60}}),s("el-avatar",{attrs:{size:60,src:t.headUrl},on:{error:t.errorHandler}},[s("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"}})])],1),s("div",{staticClass:"ipt-area"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"ipt-txt",attrs:{cols:"45",rows:"10",placeholder:"可以留言哦~~~"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),s("div",{staticClass:"post bg-primary",on:{click:t.postMessage}},[t._v("发送")])]),t.message.length?s("div",{staticClass:"chat-list"},t._l(t.message,(function(e,r){return s("div",{key:r,staticClass:"chat-item d-flex border-top"},[s("div",{staticClass:"head-pic"},[e.user&&e.user.headicon?s("img",{attrs:{src:e.user.headicon,alt:"",width:"100%",height:"100%"}}):t._e()]),s("div",{staticClass:"chat-info"},[e.user&&e.user.username?s("p",{staticClass:"username"},[t._v("\n            "+t._s(e.user.username)+"\n          ")]):t._e(),s("p",{staticClass:"time"},[t._v(t._s(t._f("date")(e.createdAt)))]),s("p",{staticClass:"content"},[t._v(t._s(e.body))])]),s("div",{staticClass:"click-box"},[s("div",{class:{disable:!t.isClass[r].comTime},on:{click:function(e){return t.dianzan(r)}}},[s("i",{staticClass:"iconfont icon-guanzhu",class:{"text-grey":!t.isClass[r].primary,"text-primary":t.isClass[r].primary}}),s("span",{staticClass:"px-2"},[t._v(t._s(e.clicks))])])])])})),0):t._e()])],1)},n=[],i=(s("8e6e"),s("456d"),s("ac6a"),s("96cf"),s("3b8d")),a=s("bd86"),c=s("2f62");function o(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(s,!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={name:"Chat",data:function(){return{isShow:!1,content:"",message:[],isClass:[]}},computed:u({},Object(c["d"])("userInfo",["userID","headUrl"])),methods:u({},Object(c["b"])("userInfo",["fetchUser"]),{errorHandler:function(){return!0},setUser:function(){var t=this.Cookies.get("token"),e=this.Cookies.get("userID");if(t&&e)return this.isShow=!0,void this.fetchUser(e)},postMessage:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.Cookies.get("token"),s=this.Cookies.get("userID"),e&&s){t.next=5;break}return this.$router.push("/login"),t.abrupt("return");case 5:if(this.content){t.next=8;break}return this.$message({type:"error",message:"内容不能为空"}),t.abrupt("return");case 8:return t.next=10,this.$http.post("comments",{user:this.userID,body:this.content});case 10:t.sent,this.content="",this.fetchComment();case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fetchComment:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("comments/list");case 2:e=t.sent,s=[],r=[],e.data.forEach((function(t,e){s.push({primary:!1,comTime:!0}),r.push({_id:t._id,body:t.body,createdAt:t.createdAt,clicks:t.clicks,user:t.user})})),this.isClass=s,this.message=r;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updateComent:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.put("comments/".concat(e),s);case 2:t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}(),dianzan:function(t){var e=this;this.isClass[t].comTime=!this.isClass[t].comTime,this.isClass[t].primary=!this.isClass[t].primary,!0===this.isClass[t].primary?this.message[t].clicks++:0===this.message[t].clicks?this.message[t].clicks=0:this.message[t].clicks--,this.updateComent(this.message[t]._id,this.message[t]),setTimeout((function(){e.isClass[t].comTime=!0}),2e3)}}),activated:function(){this.setUser(),this.fetchComment(),this.$loading.close()}},l=f,p=(s("c295"),s("2877")),h=Object(p["a"])(l,r,n,!1,null,"7d8a41f6",null);e["default"]=h.exports},"46a7":function(t,e,s){var r=s("63b6");r(r.S+r.F*!s("8e60"),"Object",{defineProperty:s("d9f6").f})},"5eda":function(t,e,s){var r=s("5ca1"),n=s("8378"),i=s("79e5");t.exports=function(t,e){var s=(n.Object||{})[t]||Object[t],a={};a[t]=e(s),r(r.S+r.F*i((function(){s(1)})),"Object",a)}},"85f2":function(t,e,s){t.exports=s("454f")},"8e6e":function(t,e,s){var r=s("5ca1"),n=s("990b"),i=s("6821"),a=s("11e9"),c=s("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,r=i(t),o=a.f,u=n(r),f={},l=0;while(u.length>l)s=o(r,e=u[l++]),void 0!==s&&c(f,e,s);return f}})},9093:function(t,e,s){var r=s("ce10"),n=s("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},"990b":function(t,e,s){var r=s("9093"),n=s("2621"),i=s("cb7c"),a=s("7726").Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(i(t)),s=n.f;return s?e.concat(s(t)):e}},bd86:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var r=s("85f2"),n=s.n(r);function i(t,e,s){return e in t?n()(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}},c295:function(t,e,s){"use strict";var r=s("3b0f"),n=s.n(r);n.a},f1ae:function(t,e,s){"use strict";var r=s("86cc"),n=s("4630");t.exports=function(t,e,s){e in t?r.f(t,e,n(0,s)):t[e]=s}}}]);
//# sourceMappingURL=chunk-6c5d9e2f.26352c85.js.map