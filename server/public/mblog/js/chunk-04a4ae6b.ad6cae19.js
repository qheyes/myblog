(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04a4ae6b","chunk-61d198c8"],{"0b21":function(e,t,r){},"42d9":function(e,t,r){"use strict";var s=r("7fc8"),n=r.n(s);n.a},"444a":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"userLogin"},[r("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("van-tab",{attrs:{title:"登录"}},[r("van-cell-group",[r("van-field",{attrs:{required:"",clearable:"",label:"用户名","right-icon":"question-o",placeholder:"请输入用户名"},model:{value:e.username,callback:function(t){e.username="string"===typeof t?t.trim():t},expression:"username"}}),r("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}})],1),r("van-button",{attrs:{type:"primary",size:"large",disabled:!e.isVaild},on:{click:e.login}},[e._v("\n        登录\n      ")])],1),r("van-tab",{attrs:{title:"注册"}},[r("van-cell-group",[r("van-field",{attrs:{required:"",clearable:"",label:"用户名","right-icon":"question-o",placeholder:"用户名不能小于4位"},model:{value:e.username,callback:function(t){e.username="string"===typeof t?t.trim():t},expression:"username"}}),r("van-field",{attrs:{type:"password",label:"密码",placeholder:"密码不能小于4位",required:""},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}})],1),r("van-button",{attrs:{type:"primary",size:"large",disabled:!e.isVaild},on:{click:e.register}},[e._v("\n        注册\n      ")])],1)],1),r("p",{staticClass:"toast"},[e._v("只有输入正确格式才能点击哟~")])],1)},n=[],i=(r("a481"),r("96cf"),r("3b8d")),a={name:"UserLogin",data:function(){return{active:0,username:"",password:""}},computed:{isVaild:function(){return String(this.username).length>4&&String(this.password).length>4}},methods:{login:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.username,r=this.password,e.next=4,this.$http.post("login",{username:t,password:r});case 4:s=e.sent,this.Cookies.set("token",s.data.token,{expires:7}),this.Cookies.set("userID",s.data._id,{expires:7}),this.username="",this.password="",this.$notify({type:"success",message:"登录成功"}),this.$router.replace("/");case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.username,r=this.password,e.next=4,this.$http.post("register",{username:t,password:r});case 4:if(s=e.sent,this.username="",this.password="",!s.data.error){e.next=12;break}return this.$toast("用户名已存在"),e.abrupt("return");case 12:this.$toast("注册成功,请登录");case 13:this.active=0;case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},o=a,c=(r("42d9"),r("2877")),l=Object(c["a"])(o,s,n,!1,null,"4f1c1d22",null);t["default"]=l.exports},"7fc8":function(e,t,r){},9419:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user calc"},[e.isShow?e._e():r("UserLogin"),e.isShow?r("div",{staticClass:"user-item"},[r("div",{staticClass:"head d-flex ai-center jc-center border-bottom"},[r("div",{staticClass:"d-flex flex-column ai-center"},[r("div",{staticClass:"head-icon"},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.headUrl,expression:"headUrl"}],attrs:{width:"100%",height:"100%"}})]),r("p",{staticClass:"username"},[e._v(e._s(e.username))]),r("p",{staticClass:"content"},[e._v(e._s(e.content))])])]),r("div",{staticClass:"user-body"},[r("ul",{staticClass:"modules"},e._l(e.modules,function(e){return r("li",{key:e.id,staticClass:"border-bottom d-flex ai-center"},[r("van-cell",{attrs:{title:e.title,"is-link":"",to:"/"}})],1)}),0)]),r("van-button",{attrs:{color:"rgb(237,206,159)",size:"large"},on:{click:e.tabLogin}},[e._v("\n      切换账号\n    ")]),r("van-button",{attrs:{type:"default",size:"large"},on:{click:e.quite}},[e._v("\n      退出\n    ")])],1):e._e()],1)},n=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("a481"),r("bd86")),a=r("2f62"),o=r("444a");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u={name:"User",components:{UserLogin:o["default"]},data:function(){return{isShow:!1,modules:[{id:0,title:"我的文章",linkTo:"articles"},{id:1,title:"我的留言",linkTo:"chat"},{id:2,title:"个人设置",linkTo:"person"},{id:3,title:"更多功能",linkTo:""}]}},computed:l({},Object(a["d"])("userInfo",["headUrl","username","content"])),methods:l({},Object(a["b"])("userInfo",["fetchUser"]),{setUser:function(){var e=this.Cookies.get("token"),t=this.Cookies.get("userID");if(e&&t)return this.isShow=!0,void this.fetchUser(t);this.isShow=!1},tabLogin:function(){this.Cookies.remove("token"),this.Cookies.remove("userID"),this.isShow=!1},quite:function(){this.Cookies.remove("token"),this.Cookies.remove("userID"),this.isShow=!1,this.$notify({type:"success",message:"退出成功"}),this.$router.replace("/")}}),activated:function(){this.setUser()}},d=u,h=(r("e81c"),r("2877")),p=Object(h["a"])(d,s,n,!1,null,"58871123",null);t["default"]=p.exports},a481:function(e,t,r){"use strict";var s=r("cb7c"),n=r("4bf8"),i=r("9def"),a=r("4588"),o=r("0390"),c=r("5f1b"),l=Math.max,u=Math.min,d=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,function(e,t,r,v){return[function(s,n){var i=e(this),a=void 0==s?void 0:s[t];return void 0!==a?a.call(s,i,n):r.call(String(i),s,n)},function(e,t){var n=v(r,e,this,t);if(n.done)return n.value;var d=s(e),h=String(this),p="function"===typeof t;p||(t=String(t));var m=d.global;if(m){var g=d.unicode;d.lastIndex=0}var w=[];while(1){var k=c(d,h);if(null===k)break;if(w.push(k),!m)break;var y=String(k[0]);""===y&&(d.lastIndex=o(h,i(d.lastIndex),g))}for(var x="",O=0,C=0;C<w.length;C++){k=w[C];for(var S=String(k[0]),j=l(u(a(k.index),h.length),0),_=[],$=1;$<k.length;$++)_.push(f(k[$]));var U=k.groups;if(p){var I=[S].concat(_,j,h);void 0!==U&&I.push(U);var q=String(t.apply(void 0,I))}else q=b(S,h,j,_,U,t);j>=O&&(x+=h.slice(O,j)+q,O=j+S.length)}return x+h.slice(O)}];function b(e,t,s,i,a,o){var c=s+e.length,l=i.length,u=p;return void 0!==a&&(a=n(a),u=h),r.call(o,u,function(r,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,s);case"'":return t.slice(c);case"<":o=a[n.slice(1,-1)];break;default:var u=+n;if(0===u)return r;if(u>l){var h=d(u/10);return 0===h?r:h<=l?void 0===i[h-1]?n.charAt(1):i[h-1]+n.charAt(1):r}o=i[u-1]}return void 0===o?"":o})}})},e81c:function(e,t,r){"use strict";var s=r("0b21"),n=r.n(s);n.a}}]);
//# sourceMappingURL=chunk-04a4ae6b.ad6cae19.js.map